# Single .env template for dev + VPS.
# VPS (single host) recommended tweaks:
# - MISCITE_MAX_UPLOAD_MB=5
# - MISCITE_MAX_BODY_MB=10
# - MISCITE_MAX_UNPACKED_MB=60
# - MISCITE_COOKIE_SECURE=true
# - MISCITE_TRUST_PROXY=true
# - MISCITE_RELOAD=false
# - MISCITE_RW_SYNC_ENABLED=true
# - MISCITE_PREDATORY_SYNC_ENABLED=true
#
# Boolean values accept: 1/0, true/false, yes/no, y/n, on/off (case-insensitive).

# Core
# MISCITE_DB_URL: SQLAlchemy database URL. Allowed: any SQLAlchemy URL (e.g., sqlite:///./data/miscite.db, postgresql+psycopg://...).
MISCITE_DB_URL=sqlite:///./data/miscite.db
# MISCITE_STORAGE_DIR: Upload storage directory. Allowed: any filesystem path.
MISCITE_STORAGE_DIR=./data/uploads
# MISCITE_MAX_UPLOAD_MB: Max PDF/DOCX upload size (MB). Allowed: integer 1-2000.
MISCITE_MAX_UPLOAD_MB=5
# MISCITE_MAX_BODY_MB: Max request body size (MB). Allowed: integer 1-4000 (should be >= MISCITE_MAX_UPLOAD_MB).
MISCITE_MAX_BODY_MB=10
# MISCITE_MAX_UNPACKED_MB: Max unpacked DOCX size (MB). Allowed: integer 10-20000.
MISCITE_MAX_UNPACKED_MB=60
# MISCITE_SESSION_DAYS: Session lifetime (days). Allowed: integer 1-3650.
MISCITE_SESSION_DAYS=14
# MISCITE_LOGIN_CODE_TTL_MINUTES: Login code TTL (minutes). Allowed: integer 5-60.
MISCITE_LOGIN_CODE_TTL_MINUTES=15
# MISCITE_LOGIN_CODE_LENGTH: Login code length (digits/chars). Allowed: integer 4-10.
MISCITE_LOGIN_CODE_LENGTH=6
# MISCITE_MAILGUN_API_KEY: Mailgun API key for email login. Allowed: string (required if using email login).
MISCITE_MAILGUN_API_KEY=
# MISCITE_MAILGUN_DOMAIN: Mailgun domain (e.g., mg.example.com). Allowed: string.
MISCITE_MAILGUN_DOMAIN=
# MISCITE_MAILGUN_SENDER: From address for emails. Allowed: string (email).
MISCITE_MAILGUN_SENDER=
# MISCITE_MAILGUN_BASE_URL: Mailgun API base URL. Allowed: URL string.
MISCITE_MAILGUN_BASE_URL=https://api.mailgun.net/v3
# MISCITE_PUBLIC_ORIGIN: Public base URL for email links (e.g., https://miscite.review). Allowed: URL string.
MISCITE_PUBLIC_ORIGIN=http://localhost:8000
# MISCITE_SAMPLE_REPORT_URL: Sample report CTA link (token, /reports/<token>, or full URL). Allowed: string.
MISCITE_SAMPLE_REPORT_URL=
# MISCITE_TURNSTILE_SITE_KEY: Cloudflare Turnstile site key. Allowed: string.
MISCITE_TURNSTILE_SITE_KEY=
# MISCITE_TURNSTILE_SECRET_KEY: Cloudflare Turnstile secret. Allowed: string.
MISCITE_TURNSTILE_SECRET_KEY=
# MISCITE_TURNSTILE_VERIFY_URL: Turnstile verify endpoint. Allowed: URL string.
MISCITE_TURNSTILE_VERIFY_URL=https://challenges.cloudflare.com/turnstile/v0/siteverify
# MISCITE_LOG_LEVEL: Logging level. Allowed: standard Python levels (DEBUG, INFO, WARNING, ERROR, CRITICAL).
MISCITE_LOG_LEVEL=INFO
# MISCITE_API_TIMEOUT_SECONDS: External API timeout (seconds). Allowed: float 2.0-120.0.
MISCITE_API_TIMEOUT_SECONDS=20
# MISCITE_JOB_API_MAX_PARALLEL: Max concurrent outbound API requests per job across all external sources. Allowed: integer 1-128.
MISCITE_JOB_API_MAX_PARALLEL=8
# MISCITE_SOURCE_GLOBAL_MAX_OPENROUTER: Per-process concurrent OpenRouter request cap (shared by all jobs). Allowed: integer 1-128.
MISCITE_SOURCE_GLOBAL_MAX_OPENROUTER=4
# MISCITE_SOURCE_GLOBAL_MAX_OPENALEX: Per-process concurrent OpenAlex request cap (shared by all jobs). Allowed: integer 1-128.
MISCITE_SOURCE_GLOBAL_MAX_OPENALEX=4
# MISCITE_SOURCE_GLOBAL_MAX_CROSSREF: Per-process concurrent Crossref request cap (shared by all jobs). Allowed: integer 1-128.
MISCITE_SOURCE_GLOBAL_MAX_CROSSREF=4
# MISCITE_SOURCE_GLOBAL_MAX_PUBMED: Per-process concurrent PubMed request cap (shared by all jobs). Allowed: integer 1-128.
MISCITE_SOURCE_GLOBAL_MAX_PUBMED=3
# MISCITE_SOURCE_GLOBAL_MAX_ARXIV: Per-process concurrent arXiv request cap (shared by all jobs). Allowed: integer 1-128.
MISCITE_SOURCE_GLOBAL_MAX_ARXIV=3
# MISCITE_SOURCE_GLOBAL_MAX_RETRACTION_API: Per-process concurrent custom retraction API request cap (shared by all jobs). Allowed: integer 1-128.
MISCITE_SOURCE_GLOBAL_MAX_RETRACTION_API=2
# MISCITE_SOURCE_GLOBAL_MAX_PREDATORY_API: Per-process concurrent custom predatory API request cap (shared by all jobs). Allowed: integer 1-128.
MISCITE_SOURCE_GLOBAL_MAX_PREDATORY_API=2
# MISCITE_CACHE_ENABLED: Enable caching. Allowed: boolean.
MISCITE_CACHE_ENABLED=true
# MISCITE_CACHE_DIR: Cache directory for file-backed caches. Allowed: any filesystem path.
MISCITE_CACHE_DIR=./data/cache
# MISCITE_CACHE_LLM_TTL_DAYS: LLM response cache TTL (days). Allowed: integer 1-3650.
MISCITE_CACHE_LLM_TTL_DAYS=30
# MISCITE_CACHE_HTTP_TTL_DAYS: HTTP metadata cache TTL (days). Allowed: integer 1-3650.
MISCITE_CACHE_HTTP_TTL_DAYS=30
# MISCITE_CACHE_TEXT_TTL_DAYS: Extracted-text cache TTL (days). Allowed: integer 1-3650.
MISCITE_CACHE_TEXT_TTL_DAYS=30
# MISCITE_CACHE_DEBUG_LOG_EACH: Log cache HIT/MISS per cache lookup (very verbose). Allowed: boolean.
MISCITE_CACHE_DEBUG_LOG_EACH=false
# MISCITE_TEXT_EXTRACT_BACKEND: Text extraction backend. Allowed: docling | markitdown.
MISCITE_TEXT_EXTRACT_BACKEND=docling
# MISCITE_TEXT_EXTRACT_TIMEOUT_SECONDS: Text extraction timeout (seconds). Allowed: float 10.0-1200.0.
MISCITE_TEXT_EXTRACT_TIMEOUT_SECONDS=120
# MISCITE_TEXT_EXTRACT_SUBPROCESS: Run extraction in a subprocess. Allowed: boolean.
MISCITE_TEXT_EXTRACT_SUBPROCESS=true
# MISCITE_TEXT_EXTRACT_PROCESS_CONTEXT: Multiprocessing start method. Allowed: auto | fork | spawn (if supported on platform).
MISCITE_TEXT_EXTRACT_PROCESS_CONTEXT=auto
# MISCITE_ACCELERATOR: Accelerator for local models/NLI. Allowed: cpu | gpu.
MISCITE_ACCELERATOR=cpu
# MISCITE_WORKER_PROCESSES: Worker process count. Allowed: integer 1..(CPU cores * 8).
MISCITE_WORKER_PROCESSES=1
# MISCITE_WORKER_POLL_SECONDS: Worker poll interval (seconds). Allowed: float 0.1-10.0.
MISCITE_WORKER_POLL_SECONDS=1.5
# MISCITE_COOKIE_SECURE: Secure cookies (HTTPS-only). Allowed: boolean.
MISCITE_COOKIE_SECURE=true
# MISCITE_TRUST_PROXY: Trust X-Forwarded-* headers. Allowed: boolean.
MISCITE_TRUST_PROXY=true
# MISCITE_RELOAD: Enable Uvicorn auto-reload (dev). Allowed: boolean.
MISCITE_RELOAD=false

# Ops modes
# MISCITE_MAINTENANCE_MODE: Disable uploads + show maintenance message. Allowed: boolean.
MISCITE_MAINTENANCE_MODE=false
# MISCITE_MAINTENANCE_MESSAGE: Message shown when maintenance mode is on. Allowed: string.
MISCITE_MAINTENANCE_MESSAGE=Maintenance in progress. Uploads are temporarily disabled.
# MISCITE_LOAD_SHED_MODE: Reduce workload (disables deep analysis, caps LLM calls/workers). Allowed: boolean.
MISCITE_LOAD_SHED_MODE=false
# MISCITE_ACCESS_TOKEN_DAYS: Report access token TTL (days). Allowed: integer 1-3650.
MISCITE_ACCESS_TOKEN_DAYS=7
# MISCITE_EXPOSE_SENSITIVE_REPORT_FIELDS: Expose full sources/methodology in UI/API. Allowed: boolean.
MISCITE_EXPOSE_SENSITIVE_REPORT_FIELDS=false

# Rate limits
# MISCITE_RATE_LIMIT_ENABLED: Enable rate limiting. Allowed: boolean.
MISCITE_RATE_LIMIT_ENABLED=true
# MISCITE_RATE_LIMIT_WINDOW_SECONDS: Rate limit window (seconds). Allowed: integer 1-3600.
MISCITE_RATE_LIMIT_WINDOW_SECONDS=60
# MISCITE_RATE_LIMIT_LOGIN_REQUEST: Login request limit per window. Allowed: integer 1-1000.
MISCITE_RATE_LIMIT_LOGIN_REQUEST=12
# MISCITE_RATE_LIMIT_LOGIN_VERIFY: Login verify limit per window. Allowed: integer 1-1000.
MISCITE_RATE_LIMIT_LOGIN_VERIFY=12
# MISCITE_RATE_LIMIT_UPLOAD: Upload limit per window. Allowed: integer 1-1000.
MISCITE_RATE_LIMIT_UPLOAD=6
# MISCITE_RATE_LIMIT_REPORT_ACCESS: Report access limit per window. Allowed: integer 1-1000.
MISCITE_RATE_LIMIT_REPORT_ACCESS=20
# MISCITE_RATE_LIMIT_EVENTS: SSE events limit per window. Allowed: integer 1-5000.
MISCITE_RATE_LIMIT_EVENTS=120
# MISCITE_RATE_LIMIT_STREAM: Stream limit per window. Allowed: integer 1-1000.
MISCITE_RATE_LIMIT_STREAM=6
# MISCITE_RATE_LIMIT_API: API limit per window. Allowed: integer 1-5000.
MISCITE_RATE_LIMIT_API=120

# Job health
# MISCITE_JOB_STALE_SECONDS: Mark job stale after this many seconds. Allowed: integer 60-86400.
MISCITE_JOB_STALE_SECONDS=3600
# MISCITE_JOB_STALE_ACTION: Action for stale jobs. Allowed: fail | requeue.
MISCITE_JOB_STALE_ACTION=fail
# MISCITE_JOB_MAX_ATTEMPTS: Max attempts per job. Allowed: integer 1-10.
MISCITE_JOB_MAX_ATTEMPTS=2
# MISCITE_JOB_REAP_INTERVAL_SECONDS: Reap interval (seconds). Allowed: integer 5-3600.
MISCITE_JOB_REAP_INTERVAL_SECONDS=60

# Upload scanning (optional)
# MISCITE_UPLOAD_SCAN_ENABLED: Enable antivirus scan for uploads. Allowed: boolean.
MISCITE_UPLOAD_SCAN_ENABLED=false
# MISCITE_UPLOAD_SCAN_COMMAND: Scan command with {path} placeholder. Allowed: string (required if scan enabled).
MISCITE_UPLOAD_SCAN_COMMAND=clamdscan --no-summary {path}
# MISCITE_UPLOAD_SCAN_TIMEOUT_SECONDS: Scan timeout (seconds). Allowed: float 5.0-600.0.
MISCITE_UPLOAD_SCAN_TIMEOUT_SECONDS=45

# LLM (OpenRouter) - required
# OPENROUTER_API_KEY: OpenRouter API key. Allowed: string (required for parsing/matching/inappropriate checks).
OPENROUTER_API_KEY=
# MISCITE_LLM_MODEL: Default OpenRouter model for misc checks. Allowed: string (OpenRouter model id).
MISCITE_LLM_MODEL=google/gemini-3-flash-preview
# MISCITE_ENABLE_LLM_INAPPROPRIATE: Enable LLM inappropriate-citation checks. Allowed: boolean (must be true; no fallback).
MISCITE_ENABLE_LLM_INAPPROPRIATE=true
# MISCITE_LLM_MAX_CALLS: Max total LLM calls per job. Allowed: integer 1-200.
MISCITE_LLM_MAX_CALLS=25
# MISCITE_LLM_PARSE_MODEL: OpenRouter model for parsing. Allowed: string (OpenRouter model id).
MISCITE_LLM_PARSE_MODEL=google/gemini-3-flash-preview
# MISCITE_LLM_MATCH_MODEL: OpenRouter model for matching. Allowed: string (OpenRouter model id).
MISCITE_LLM_MATCH_MODEL=google/gemini-3-flash-preview
# MISCITE_LLM_DEEP_ANALYSIS_MODEL: OpenRouter model for deep analysis. Allowed: string (OpenRouter model id).
MISCITE_LLM_DEEP_ANALYSIS_MODEL=google/gemini-3-flash-preview
# MISCITE_LLM_MATCH_MAX_CALLS: Max LLM match calls per job (citation↔bibliography + metadata candidate disambiguation). Allowed: integer 0-200.
MISCITE_LLM_MATCH_MAX_CALLS=50
# MISCITE_LLM_BIB_PARSE_MAX_CHARS: Max bibliography text chars sent to LLM. Allowed: integer 1000-500000.
MISCITE_LLM_BIB_PARSE_MAX_CHARS=120000
# MISCITE_LLM_BIB_PARSE_MAX_REFS: Max bibliography refs parsed. Allowed: integer 1-2000.
MISCITE_LLM_BIB_PARSE_MAX_REFS=400
# MISCITE_LLM_CITATION_PARSE_MAX_CHARS: Max main text chars sent to LLM. Allowed: integer 1000-500000.
MISCITE_LLM_CITATION_PARSE_MAX_CHARS=120000
# MISCITE_LLM_CITATION_PARSE_MAX_LINES: Max candidate lines for citation parsing. Allowed: integer 1-10000.
MISCITE_LLM_CITATION_PARSE_MAX_LINES=2000
# MISCITE_LLM_CITATION_PARSE_MAX_CANDIDATE_CHARS: Max candidate chars for citations. Allowed: integer 1000-200000.
MISCITE_LLM_CITATION_PARSE_MAX_CANDIDATE_CHARS=60000
# MISCITE_RESOLVE_MAX_WORKERS: Parallelism for metadata resolution. Allowed: integer 1-64.
MISCITE_RESOLVE_MAX_WORKERS=8
# MISCITE_INAPPROPRIATE_MAX_WORKERS: Parallelism for inappropriate checks. Allowed: integer 1-64.
MISCITE_INAPPROPRIATE_MAX_WORKERS=4
# MISCITE_PREPRINT_YEAR_GAP_MAX: Max year gap treated as plausible for preprint/working-paper → published matches. Allowed: integer 0-50.
MISCITE_PREPRINT_YEAR_GAP_MAX=5

# Optional local NLI (GPU/CPU)
# MISCITE_ENABLE_LOCAL_NLI: Enable local NLI model for checks. Allowed: boolean.
MISCITE_ENABLE_LOCAL_NLI=false
# MISCITE_LOCAL_NLI_MODEL: Hugging Face model id for NLI. Allowed: string.
MISCITE_LOCAL_NLI_MODEL=MoritzLaurer/DeBERTa-v3-base-mnli-fever-anli

# Deep analysis (optional, can be expensive)
# MISCITE_ENABLE_DEEP_ANALYSIS: Enable deep analysis stage. Allowed: boolean.
MISCITE_ENABLE_DEEP_ANALYSIS=false
# MISCITE_ENABLE_DEEP_ANALYSIS_LLM_KEY_SELECTION: LLM selection of key references. Allowed: boolean.
MISCITE_ENABLE_DEEP_ANALYSIS_LLM_KEY_SELECTION=true
# MISCITE_ENABLE_DEEP_ANALYSIS_LLM_SUGGESTIONS: LLM suggestions for additions/removals. Allowed: boolean.
MISCITE_ENABLE_DEEP_ANALYSIS_LLM_SUGGESTIONS=true
# MISCITE_ENABLE_DEEP_ANALYSIS_LLM_STRUCTURE: LLM-based manuscript structure extraction (headings/levels). Allowed: boolean.
MISCITE_ENABLE_DEEP_ANALYSIS_LLM_STRUCTURE=true
# MISCITE_DEEP_ANALYSIS_MIN_CONFIDENCE: Min confidence threshold. Allowed: float 0.0-1.0.
MISCITE_DEEP_ANALYSIS_MIN_CONFIDENCE=0.55
# MISCITE_DEEP_ANALYSIS_MAX_ORIGINAL_REFS: Max original refs to expand. Allowed: integer 10-5000.
MISCITE_DEEP_ANALYSIS_MAX_ORIGINAL_REFS=400
# MISCITE_DEEP_ANALYSIS_PAPER_EXCERPT_MAX_CHARS: Max chars from each paper excerpt. Allowed: integer 500-50000.
MISCITE_DEEP_ANALYSIS_PAPER_EXCERPT_MAX_CHARS=6000
# MISCITE_DEEP_ANALYSIS_MAX_NODES: Max nodes in deep-analysis graph. Allowed: integer 100-200000.
MISCITE_DEEP_ANALYSIS_MAX_NODES=2500
# MISCITE_DEEP_ANALYSIS_MAX_EDGES: Max edges in deep-analysis graph. Allowed: integer 100-1000000.
MISCITE_DEEP_ANALYSIS_MAX_EDGES=50000
# MISCITE_DEEP_ANALYSIS_MAX_WORKERS: Parallelism for deep analysis. Allowed: integer 1-64.
MISCITE_DEEP_ANALYSIS_MAX_WORKERS=8
# MISCITE_DEEP_ANALYSIS_MAX_REFERENCES_PER_WORK: Max refs per work. Allowed: integer 5-500.
MISCITE_DEEP_ANALYSIS_MAX_REFERENCES_PER_WORK=80
# MISCITE_DEEP_ANALYSIS_MAX_SECOND_HOP_SEEDS: Max second-hop seeds. Allowed: integer 0-50000.
MISCITE_DEEP_ANALYSIS_MAX_SECOND_HOP_SEEDS=500
# MISCITE_DEEP_ANALYSIS_MAX_TOTAL_CITING_REFS: Max total citing refs. Allowed: integer 0-50000.
MISCITE_DEEP_ANALYSIS_MAX_TOTAL_CITING_REFS=1000
# MISCITE_DEEP_ANALYSIS_MAX_CITING_REFS_FOR_SECOND_HOP: Max citing refs for second hop. Allowed: integer 0-50000.
MISCITE_DEEP_ANALYSIS_MAX_CITING_REFS_FOR_SECOND_HOP=800
# MISCITE_DEEP_ANALYSIS_DISPLAY_MAX_KEY_REFS: Display cap for key refs. Allowed: integer 1-200.
MISCITE_DEEP_ANALYSIS_DISPLAY_MAX_KEY_REFS=25
# MISCITE_DEEP_ANALYSIS_DISPLAY_MAX_PER_CATEGORY: Display cap per category. Allowed: integer 1-200.
MISCITE_DEEP_ANALYSIS_DISPLAY_MAX_PER_CATEGORY=20
# MISCITE_DEEP_ANALYSIS_DISPLAY_MAX_OPENALEX_FETCHES: Display cap for OpenAlex fetches. Allowed: integer 0-2000.
MISCITE_DEEP_ANALYSIS_DISPLAY_MAX_OPENALEX_FETCHES=140
# MISCITE_DEEP_ANALYSIS_STRUCTURE_MAX_CANDIDATES: Max heading candidates sent to LLM for structuring. Allowed: integer 20-5000.
MISCITE_DEEP_ANALYSIS_STRUCTURE_MAX_CANDIDATES=250
# MISCITE_DEEP_ANALYSIS_REVIEWER_RECENT_YEARS: Reviewer recency window (years). Use 0 for no recency filter. Allowed: integer 0-100.
MISCITE_DEEP_ANALYSIS_REVIEWER_RECENT_YEARS=10
# MISCITE_DEEP_ANALYSIS_REVIEWER_AUTHOR_WORKS_MAX: Max recent works fetched per author for reviewer screening. Allowed: integer 1-5000.
MISCITE_DEEP_ANALYSIS_REVIEWER_AUTHOR_WORKS_MAX=100
# MISCITE_ENABLE_DEEP_ANALYSIS_LLM_SUBSECTION_RECOMMENDATIONS: LLM section revision plans (top-level sections; nested merged). Allowed: boolean.
MISCITE_ENABLE_DEEP_ANALYSIS_LLM_SUBSECTION_RECOMMENDATIONS=true
# MISCITE_DEEP_ANALYSIS_SUBSECTION_MAX_SUBSECTIONS: Max top-level sections to analyze (ranked by citation density). Use 0 for all sections. Allowed: integer 0-200.
MISCITE_DEEP_ANALYSIS_SUBSECTION_MAX_SUBSECTIONS=0
# MISCITE_DEEP_ANALYSIS_SUBSECTION_GRAPH_MAX_NODES: Max nodes per section graph. Allowed: integer 50-50000.
MISCITE_DEEP_ANALYSIS_SUBSECTION_GRAPH_MAX_NODES=700
# MISCITE_DEEP_ANALYSIS_SUBSECTION_GRAPH_MAX_EDGES: Max edges per section graph. Allowed: integer 100-1000000.
MISCITE_DEEP_ANALYSIS_SUBSECTION_GRAPH_MAX_EDGES=6000
# MISCITE_DEEP_ANALYSIS_SUBSECTION_TEXT_MAX_CHARS: Max chars of section text sent to LLM. Allowed: integer 300-50000.
MISCITE_DEEP_ANALYSIS_SUBSECTION_TEXT_MAX_CHARS=4000
# MISCITE_DEEP_ANALYSIS_SUBSECTION_PROMPT_MAX_REFS: Max refs included in each section LLM prompt. Allowed: integer 10-500.
MISCITE_DEEP_ANALYSIS_SUBSECTION_PROMPT_MAX_REFS=70
# MISCITE_DEEP_ANALYSIS_ABSTRACT_MAX_CHARS: Max chars stored/sent for each abstract in deep analysis. Allowed: integer 0-50000.
MISCITE_DEEP_ANALYSIS_ABSTRACT_MAX_CHARS=1200

# Metadata sources
# MISCITE_CROSSREF_MAILTO: Contact email for Crossref polite pool. Allowed: string (email).
MISCITE_CROSSREF_MAILTO=you@example.com
# MISCITE_CROSSREF_USER_AGENT: User-Agent header for Crossref. Allowed: string (include mailto for compliance).
MISCITE_CROSSREF_USER_AGENT=miscite/0.1 (mailto:you@example.com)
# MISCITE_NCBI_TOOL: NCBI E-utilities tool parameter (PubMed). Allowed: string.
MISCITE_NCBI_TOOL=miscite
# MISCITE_NCBI_EMAIL: Contact email for NCBI E-utilities (PubMed). Allowed: string (email). Defaults to MISCITE_CROSSREF_MAILTO.
MISCITE_NCBI_EMAIL=you@example.com
# MISCITE_NCBI_API_KEY: Optional NCBI API key for higher rate limits. Allowed: string.
MISCITE_NCBI_API_KEY=

# Datasets (local files)
# MISCITE_RETRACTIONWATCH_CSV: Path to Retraction Watch CSV. Allowed: filesystem path (must exist at runtime).
MISCITE_RETRACTIONWATCH_CSV=./data/datasets/retraction-watch-data/retraction_watch.csv
# MISCITE_PREDATORY_CSV: Path to predatory venues CSV. Allowed: filesystem path (must exist at runtime or API enabled).
MISCITE_PREDATORY_CSV=./data/datasets/predatory.csv

# Predatory list auto-sync (Google Sheets)
# VPS: set MISCITE_PREDATORY_SYNC_ENABLED=true
# MISCITE_PREDATORY_SYNC_ENABLED: Auto-sync predatory lists. Allowed: boolean.
MISCITE_PREDATORY_SYNC_ENABLED=true
# MISCITE_PREDATORY_SYNC_INTERVAL_HOURS: Sync interval (hours). Allowed: integer 1-720.
MISCITE_PREDATORY_SYNC_INTERVAL_HOURS=24
# MISCITE_PREDATORY_PUBLISHERS_URL: Google Sheets URL for publishers list. Allowed: URL string.
MISCITE_PREDATORY_PUBLISHERS_URL=https://docs.google.com/spreadsheets/d/1BHM4aJljhbOAzSpkX1kXDUEvy6vxREZu5WJaDH6M1Vk/edit?usp=sharing
# MISCITE_PREDATORY_JOURNALS_URL: Google Sheets URL for journals list. Allowed: URL string.
MISCITE_PREDATORY_JOURNALS_URL=https://docs.google.com/spreadsheets/d/1Qa1lAlSbl7iiKddYINNsDB4wxI7uUA4IVseeLnCc5U4/edit?gid=0#gid=0

# Optional list APIs (remote)
# MISCITE_RETRACTION_API_ENABLED: Enable retraction API lookup. Allowed: boolean.
MISCITE_RETRACTION_API_ENABLED=false
# MISCITE_RETRACTION_API_MODE: Retraction API mode. Allowed: lookup | list.
MISCITE_RETRACTION_API_MODE=lookup
# MISCITE_RETRACTION_API_URL: Retraction API base URL. Allowed: URL string.
MISCITE_RETRACTION_API_URL=
# MISCITE_RETRACTION_API_TOKEN: Retraction API token (if required). Allowed: string.
MISCITE_RETRACTION_API_TOKEN=

# MISCITE_PREDATORY_API_ENABLED: Enable predatory API lookup. Allowed: boolean.
MISCITE_PREDATORY_API_ENABLED=false
# MISCITE_PREDATORY_API_MODE: Predatory API mode. Allowed: lookup | list.
MISCITE_PREDATORY_API_MODE=lookup
# MISCITE_PREDATORY_API_URL: Predatory API base URL. Allowed: URL string.
MISCITE_PREDATORY_API_URL=
# MISCITE_PREDATORY_API_TOKEN: Predatory API token (if required). Allowed: string.
MISCITE_PREDATORY_API_TOKEN=

# Retraction Watch dataset auto-sync (Crossref-hosted GitLab repo)
# VPS: set MISCITE_RW_SYNC_ENABLED=true (method: http or git)
# MISCITE_RW_SYNC_ENABLED: Auto-sync Retraction Watch dataset. Allowed: boolean.
MISCITE_RW_SYNC_ENABLED=true
# MISCITE_RW_SYNC_METHOD: Sync method. Allowed: git | http.
MISCITE_RW_SYNC_METHOD=git
# MISCITE_RW_SYNC_INTERVAL_HOURS: Sync interval (hours). Allowed: integer 1-720.
MISCITE_RW_SYNC_INTERVAL_HOURS=24
# MISCITE_RW_GIT_REPO: Git repo URL for Retraction Watch data. Allowed: URL string.
MISCITE_RW_GIT_REPO=https://gitlab.com/crossref/retraction-watch-data
# MISCITE_RW_GIT_DIR: Local clone directory for Retraction Watch data. Allowed: filesystem path.
MISCITE_RW_GIT_DIR=./data/datasets/retraction-watch-data
# MISCITE_RW_HTTP_URL: Direct CSV URL for HTTP sync. Allowed: URL string.
MISCITE_RW_HTTP_URL=https://gitlab.com/crossref/retraction-watch-data/-/raw/main/retraction_watch.csv?ref_type=heads&inline=false

# Billing (Stripe)
# MISCITE_BILLING_ENABLED: Enable Stripe billing gates. Allowed: boolean.
MISCITE_BILLING_ENABLED=false
# MISCITE_BILLING_COST_MULTIPLIER: Multiplier applied to raw LLM usage cost. Allowed: float.
MISCITE_BILLING_COST_MULTIPLIER=2.0
# MISCITE_BILLING_CURRENCY: Billing currency (Stripe supported, lowercase). Allowed: string.
MISCITE_BILLING_CURRENCY=usd
# MISCITE_BILLING_MIN_CHARGE_CENTS: Minimum top-up / auto-charge amount in cents. Allowed: integer.
MISCITE_BILLING_MIN_CHARGE_CENTS=500
# MISCITE_BILLING_MIN_BALANCE_CENTS: Minimum balance required to start jobs when auto-charge is off. Allowed: integer.
MISCITE_BILLING_MIN_BALANCE_CENTS=0
# MISCITE_BILLING_AUTO_CHARGE_THRESHOLD_CENTS: Auto-charge triggers when balance drops below this. Allowed: integer.
MISCITE_BILLING_AUTO_CHARGE_THRESHOLD_CENTS=500
# MISCITE_BILLING_AUTO_CHARGE_AMOUNT_CENTS: Auto-charge amount in cents. Allowed: integer.
MISCITE_BILLING_AUTO_CHARGE_AMOUNT_CENTS=2000
# MISCITE_BILLING_AUTO_CHARGE_IN_FLIGHT_TTL_SECONDS: Auto-charge dedupe window (seconds). Allowed: integer.
MISCITE_BILLING_AUTO_CHARGE_IN_FLIGHT_TTL_SECONDS=1800
# STRIPE_SECRET_KEY: Stripe secret key. Allowed: string (required if billing enabled).
STRIPE_SECRET_KEY=
# STRIPE_WEBHOOK_SECRET: Stripe webhook secret. Allowed: string (required if billing enabled).
STRIPE_WEBHOOK_SECRET=
# STRIPE_SUCCESS_URL: Redirect URL after checkout success. Allowed: URL string.
STRIPE_SUCCESS_URL=http://localhost:8000/billing/success
# STRIPE_CANCEL_URL: Redirect URL after checkout cancel. Allowed: URL string.
STRIPE_CANCEL_URL=http://localhost:8000/billing/cancel
# MISCITE_OPENROUTER_PRICING_URL: OpenRouter models endpoint for pricing. Allowed: URL string.
MISCITE_OPENROUTER_PRICING_URL=https://openrouter.ai/api/v1/models
# MISCITE_OPENROUTER_PRICING_REFRESH_MINUTES: How often to refresh pricing cache. Allowed: integer.
MISCITE_OPENROUTER_PRICING_REFRESH_MINUTES=60
